(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{199:function(n,s,a){"use strict";a.r(s);var e=a(0),t=Object(e.a)({},function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"centos7-x-编译安装nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7-x-编译安装nginx","aria-hidden":"true"}},[n._v("#")]),n._v(" centos7.x 编译安装nginx")]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("安装编译工具依赖包")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("yum install gcc gcc-c++ automake pcre pcre-devel zlib zlib-devel openssl openssl-devel -y\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/developer/news/119838",target:"_blank",rel:"noopener noreferrer"}},[n._v("安装参考1"),a("OutboundLink")],1),n._v(" "),a("a",{attrs:{href:"https://www.raksmart.com/27.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("安装参考2"),a("OutboundLink")],1)]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("下载nginx包")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("wget http://nginx.org/download/nginx-1.16.0.tar.gz\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"http://nginx.org/download/",target:"_blank",rel:"noopener noreferrer"}},[n._v("nginx包源"),a("OutboundLink")],1)]),n._v(" "),a("ul",[a("li",[a("strong",[n._v("解压nginx包文件并进入目录")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("tar -zxvf nginx-1.16.0.tar.gz //解压\ncd nginx-1.16.0 //进入目录\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br")])]),a("ul",[a("li",[a("strong",[n._v("配置编译参数命令（可以使用 "),a("code",[n._v("./configure --help")]),n._v(" 查询详细参数）")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("./configure \\\n--prefix=/usr/local/nginx \\\n--sbin-path=/usr/local/nginx/sbin/nginx \\\n--conf-path=/usr/local/nginx/conf/nginx.conf \\\n--error-log-path=/var/log/nginx/error.log \\\n--http-log-path=/var/log/nginx/access.log \\\n--pid-path=/var/run/nginx/nginx.pid \\\n--lock-path=/var/lock/nginx.lock \\\n--user=nginx \\\n--group=nginx \\\n--with-http_ssl_module \\\n--with-http_stub_status_module \\\n--with-http_gzip_static_module \\\n--http-client-body-temp-path=/var/tmp/nginx/client/ \\\n--http-proxy-temp-path=/var/tmp/nginx/proxy/ \\\n--http-fastcgi-temp-path=/var/tmp/nginx/fcgi/ \\\n--http-uwsgi-temp-path=/var/tmp/nginx/uwsgi \\\n--http-scgi-temp-path=/var/tmp/nginx/scgi \\\n--with-pcre\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br")])]),a("p",[a("font",{attrs:{color:"#ec5975"}},[n._v("注：安装之前需要手动创建上面指定的nginx文件夹，即/var/temp、/var/temp/nginx、/var/run/nginx/文件夹，否则启动时报错")])],1),n._v(" "),a("ul",[a("li",[a("strong",[n._v("编译并安装 清除安装包文件")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("make && make install clean\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[n._v("查找nginx安装路径并进入（查看是否存在"),a("code",[n._v("conf")]),n._v("、"),a("code",[n._v("sbin")]),n._v("、"),a("code",[n._v("html")]),n._v("文件夹，若存在则安装成功）")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("whereis nginx //查找\ncd /usr/local/nginx //进入目录\nls 或者 ls -l //查看\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br")])]),a("ul",[a("li",[a("strong",[n._v("nginx操作命令")])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("cd /usr/local/nginx/sbin/ //进入目录\n./nginx //启动\n./nginx -s stop //停止\n./nginx -s quit //退出\n./nginx -s reload //重启\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("ul",[a("li",[a("strong",[n._v("启动nginx报错 "),a("code",[n._v('nginx: [emerg] getpwnam("nginx") failed')])])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("原因：由于编译安装的时候指定了运行账户但是没有建立这个账户\n解决：新建nginx的运行账户\n命令：useradd -s /sbin/nologin -M nginx\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br")])]),a("ul",[a("li",[a("strong",[n._v("新建账户后运行nginx依然报错 "),a("code",[n._v('nginx: [emerg] mkdir() "/var/tmp/nginx/client/" failed (2: No such file or directory)')])])])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("原因：运行时找不到指定文件夹\n解决：新建对应的文件夹\n命令：mkdir -p /var/tmp/nginx/client\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br")])]),a("ul",[a("li",[a("strong",[n._v("再次运行nginx "),a("code",[n._v("./nginx")]),n._v("，若无报错，则说明启动成功，在浏览器输入服务器公网ip，出现下图则说明nginx运行成功")]),n._v(" "),a("img",{attrs:{src:"/blog/img/nginx/nginx_13.png",alt:"nginx"}})])])])},[],!1,null,null,null);s.default=t.exports}}]);